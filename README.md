# ThiÃªn Äá»‹a NhÃ¢n - á»¨ng dá»¥ng Phong Thá»§y & Tá»­ Vi

ğŸŒ **Domain**: [thiendianhan.app](https://thiendianhan.app)

á»¨ng dá»¥ng phong thá»§y, tá»­ vi vÃ  thiÃªn vÄƒn há»c toÃ n diá»‡n vá»›i há»‡ thá»‘ng thÃ nh viÃªn cao cáº¥p vÃ  quáº£n lÃ½ ná»™i dung chuyÃªn nghiá»‡p.

## âœ¨ TÃ­nh nÄƒng chÃ­nh

### ğŸŒŸ Há»‡ Máº·t Trá»i (Solar System)
- MÃ´ phá»ng há»‡ máº·t trá»i 3D tÆ°Æ¡ng tÃ¡c
- ThÃ´ng tin chi tiáº¿t vá» 8 hÃ nh tinh
- Hiá»‡u á»©ng visual Ä‘áº¹p máº¯t vá»›i WebGL
- **Route**: `/solar`

### ğŸ“° Tin Tá»©c (Trang chá»§)
- Há»‡ thá»‘ng tin tá»©c phong thá»§y vÃ  tá»­ vi
- Hot news vÃ  bÃ i viáº¿t theo chuyÃªn Ä‘á»
- Slider tin ná»•i báº­t vá»›i skeleton loading
- **Route**: `/` (trang chá»§)

### ğŸ“… Xem NgÃ y (Calendar)
- TÃ¬m ngÃ y tá»‘t cho cÃ¡c hoáº¡t Ä‘á»™ng
- TÃ­nh toÃ¡n theo Ã¢m lá»‹ch vÃ  dÆ°Æ¡ng lá»‹ch
- **Trá»« sao tá»± Ä‘á»™ng** sau 1 phÃºt sá»­ dá»¥ng
- **Route**: `/calendar`

### ğŸ—“ï¸ Lá»‹ch Viá»‡t
- **Tab Lá»‹ch Ã‚m**: Xem ngÃ y Ã¢m lá»‹ch, pha máº·t trÄƒng
- **Tab Lá»‹ch Tiáº¿t KhÃ­**: TÃ­nh toÃ¡n 24 tiáº¿t khÃ­
- **Miá»…n phÃ­** cho táº¥t cáº£ ngÆ°á»i dÃ¹ng
- **Route**: `/lich-viet`

### ğŸ¯ BÃ¡t Tá»± (Tá»­ Vi)
- TÃ­nh toÃ¡n bÃ¡t tá»± cÃ¡ nhÃ¢n chi tiáº¿t
- PhÃ¢n tÃ­ch ngÅ© hÃ nh sinh kháº¯c
- TÆ° váº¥n hÆ°á»›ng Ä‘i vÃ  nghá» nghiá»‡p phÃ¹ há»£p
- **Trá»« sao tá»± Ä‘á»™ng** sau 1 phÃºt sá»­ dá»¥ng
- **Route**: `/battu`

### ğŸ§­ La Kinh (Phong Thá»§y)
- TÃ­nh hÆ°á»›ng phong thá»§y chÃ­nh xÃ¡c
- Sá»­ dá»¥ng la bÃ n Ä‘iá»‡n tá»­ GPS
- TÃ­nh toÃ¡n cÃ¡t hung theo Ä‘á»‹a lÃ½
- **Trá»« sao tá»± Ä‘á»™ng** sau 1 phÃºt sá»­ dá»¥ng
- **Route**: `/lakinh`

### ğŸŒŠ Lá»¥c HÃ o (Thá»§y Triá»u)
- Dá»± Ä‘oÃ¡n thá»§y triá»u theo khu vá»±c
- ThÃ´ng tin vá» pha máº·t trÄƒng chi tiáº¿t
- Lá»‹ch thuá»· triá»u hÃ ng ngÃ y
- **Trá»« sao tá»± Ä‘á»™ng** sau 1 phÃºt sá»­ dá»¥ng
- **Route**: `/luchao`

## ğŸ” Há»‡ thá»‘ng XÃ¡c thá»±c & Membership

### ÄÄƒng kÃ½ tÃ i khoáº£n
- ÄÄƒng kÃ½ báº±ng email vÃ  máº­t kháº©u
- XÃ¡c thá»±c email tá»± Ä‘á»™ng
- **Tá»± Ä‘á»™ng táº¡o gÃ³i Basic** vá»›i 20 sao
- LÆ°u trá»¯ thÃ´ng tin user an toÃ n

### ÄÄƒng nháº­p
- **Admin**: TÃ i khoáº£n admin máº·c Ä‘á»‹nh (admin/22121985)  
- **Firebase**: ÄÄƒng nháº­p báº±ng tÃ i khoáº£n Ä‘Ã£ Ä‘Äƒng kÃ½
- PhiÃªn Ä‘Äƒng nháº­p cÃ³ hiá»‡u lá»±c **3 ngÃ y**

### Báº£o máº­t
- XÃ¡c thá»±c email báº¯t buá»™c
- MÃ£ hÃ³a máº­t kháº©u
- Tá»± Ä‘á»™ng Ä‘Äƒng xuáº¥t sau 3 ngÃ y

## â­ Há»‡ thá»‘ng Membership & Stars

### CÃ¡c háº¡ng thÃ nh viÃªn
- **Basic** (20 sao/thÃ¡ng): Máº·c Ä‘á»‹nh khi Ä‘Äƒng kÃ½
- **Standard** (200 sao/thÃ¡ng): VIP 1 thÃ¡ng
- **Premium** (3000 sao/nÄƒm): VIP 1 nÄƒm
- **Master** (200 sao/ngÃ y): VIP 1 nÄƒm

### TÃ­nh nÄƒng Stars System
- **Trá»« sao tá»± Ä‘á»™ng** khi sá»­ dá»¥ng trang quÃ¡ 1 phÃºt
- **Countdown notification** 60 giÃ¢y trÆ°á»›c khi trá»« sao
- **Cooldown 10 phÃºt** giá»¯a cÃ¡c láº§n trá»« sao
- **Reset tá»± Ä‘á»™ng** theo chu ká»³ gÃ³i
- **Admin quáº£n lÃ½** sao cá»§a users

### Quyá»n truy cáº­p
- **Táº¥t cáº£ users** cÃ³ **full permissions** cho táº¥t cáº£ tÃ­nh nÄƒng
- **PhÃ¢n biá»‡t** qua sá»‘ sao vÃ  thá»i háº¡n membership
- **KhÃ´ng háº¡n cháº¿** quyá»n truy cáº­p dá»±a trÃªn gÃ³i

## ğŸ“Š Thá»‘ng kÃª truy cáº­p
- Äáº¿m lÆ°á»£t truy cáº­p tá»«ng trang
- LÆ°u trá»¯ thá»‘ng kÃª trÃªn Firebase
- Hiá»ƒn thá»‹ realtime counter
- Performance optimization vá»›i caching

## ğŸ› ï¸ Admin Panel

### Quáº£n lÃ½ Users
- Danh sÃ¡ch táº¥t cáº£ thÃ nh viÃªn
- Chi tiáº¿t thÃ´ng tin user
- **Cá»™ng sao** cho users (1-1000 sao)
- **NÃ¢ng cáº¥p membership** tiers
- Quáº£n lÃ½ permissions (symbolic)

### Quáº£n lÃ½ News
- Táº¡o/Sá»­a articles
- Quáº£n lÃ½ categories
- Preview trÆ°á»›c khi publish
- Bulk operations

### Dashboard & Analytics
- Thá»‘ng kÃª users theo membership tiers
- Page views vÃ  visit counters
- Registration analytics
- Expiring memberships alerts

## ğŸš€ Deployment & Production

### ğŸŒ Live Website
- **Production**: [thiendianhan.app](https://thiendianhan.app)
- **Staging**: [lunar-calendar.vercel.app](https://lunar-calendar.vercel.app)

### ğŸ“‹ Domain Setup
- Xem chi tiáº¿t: [DOMAIN_SETUP_GUIDE.md](DOMAIN_SETUP_GUIDE.md)
- DNS Configuration cho thiendianhan.app
- SSL Certificate tá»± Ä‘á»™ng tá»« Vercel

### ğŸš€ Local Development

#### YÃªu cáº§u
- Node.js >= 16
- npm hoáº·c yarn
- Firebase project

#### CÃ i Ä‘áº·t dependencies
```bash
npm install
```

#### Cáº¥u hÃ¬nh Firebase
1. Táº¡o file `.env` tá»« template
2. Äiá»n thÃ´ng tin Firebase config
3. Chi tiáº¿t xem [FIREBASE_AUTH_SETUP.md](FIREBASE_AUTH_SETUP.md)

#### Cháº¡y á»©ng dá»¥ng
```bash
npm start
```

Má»Ÿ [http://localhost:3000](http://localhost:3000) Ä‘á»ƒ xem trong browser.

#### Build cho production
```bash
npm run build
```

## ğŸ“ Cáº¥u trÃºc project

```
src/
â”œâ”€â”€ components/          # React components
â”œâ”€â”€ pages/              # CÃ¡c trang chÃ­nh
â”œâ”€â”€ contexts/           # React contexts (Auth)
â”œâ”€â”€ hooks/              # Custom hooks (usePageTimeTracker, usePermissions)
â”œâ”€â”€ utils/              # Utility functions
â”œâ”€â”€ data/               # Dá»¯ liá»‡u tÄ©nh
â”œâ”€â”€ assets/             # HÃ¬nh áº£nh, icons
â”œâ”€â”€ admin/              # Admin panel components & pages
â””â”€â”€ firebase/           # Firebase configuration
```

## ğŸ”§ Performance & Optimizations

### ğŸ“Š Visit Tracking Optimization
- **97.8% reduction** trong Firebase writes
- **Batch processing** vá»›i 30s intervals
- **Local queuing** vÃ  fallback mechanisms
- **Session-based** visit counting

### ğŸ¯ Page Points System
- **Smart countdown** vá»›i pause/resume
- **Page Visibility API** integration
- **Toast notifications** vá»›i skip functionality
- **Cooldown management** vá»›i localStorage

### âš¡ General Optimizations
- **Cached categories** (5 phÃºt expiry)
- **Parallel data loading** vá»›i Promise.all
- **Reduced Firebase calls** qua batching
- **Session storage** cho page stats
- **Conditional setup** chá»‰ khi cáº§n thiáº¿t

### ğŸ›¡ï¸ Fallback Mechanisms
- **Composite index fallback** cho Firestore queries
- **Client-side filtering** khi server query tháº¥t báº¡i
- **Graceful error handling** cho táº¥t cáº£ operations

## ğŸ’¡ Demo Mode

Náº¿u chÆ°a cáº¥u hÃ¬nh Firebase:
- Váº«n cÃ³ thá»ƒ Ä‘Äƒng nháº­p báº±ng admin
- Page counter sáº½ hiá»ƒn thá»‹ "--"
- Stars system hiá»ƒn thá»‹ demo data
- TÃ­nh nÄƒng Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p Firebase sáº½ bÃ¡o lá»—i

## ğŸ“– TÃ i liá»‡u chi tiáº¿t

### ğŸ”§ Setup & Configuration
- [Domain Setup Guide](DOMAIN_SETUP_GUIDE.md) - Cáº¥u hÃ¬nh thiendianhan.app
- [Firebase Setup](FIREBASE_SETUP.md) - CÃ i Ä‘áº·t Firebase
- [Firebase Authentication](FIREBASE_AUTH_SETUP.md) - Há»‡ thá»‘ng Ä‘Äƒng nháº­p
- [Firestore Indexes](FIRESTORE_INDEX_SETUP.md) - Database indexes

### ğŸ’ Features & Systems
- [Membership System](MEMBERSHIP_SYSTEM_GUIDE.md) - Há»‡ thá»‘ng thÃ nh viÃªn
- [Permissions Guide](PERMISSIONS_GUIDE.md) - Quáº£n lÃ½ quyá»n
- [News System](NEWS_SETUP_GUIDE.md) - Há»‡ thá»‘ng tin tá»©c
- [Page Points Deduction](PAGE_POINTS_DEDUCTION_GUIDE.md) - Trá»« sao tá»± Ä‘á»™ng

### ğŸš€ Performance & Optimization
- [Visit Tracking Optimization](VISIT_TRACKING_OPTIMIZATION.md) - Tá»‘i Æ°u tracking
- [Page Visibility Fix](PAGE_VISIBILITY_FIX.md) - Fix countdown pause/resume
- [Toast Visibility Fix](TOAST_VISIBILITY_FIX.md) - Fix toast disappearing
- [Dashboard Page Names Update](DASHBOARD_PAGE_NAMES_UPDATE.md) - Cáº­p nháº­t tÃªn trang

## ğŸ› ï¸ Tech Stack

### Frontend
- **React** - UI framework
- **Tailwind CSS** - Styling
- **React Router** - Navigation
- **Heroicons** - Icon system

### Backend & Database
- **Firebase Auth** - Authentication
- **Firestore** - Database
- **Firebase Storage** - File storage

### Performance
- **Service Worker** - Caching
- **Lazy Loading** - Component optimization
- **Code Splitting** - Bundle optimization

### 3D Graphics
- **Three.js** - Solar System visualization

## ğŸ› Troubleshooting

### Lá»—i thÆ°á»ng gáº·p
1. **Missing projectId**: ChÆ°a cáº¥u hÃ¬nh `.env` file
2. **Email verification**: Kiá»ƒm tra spam folder
3. **Firebase permissions**: Kiá»ƒm tra Firestore rules
4. **Stars khÃ´ng update**: Kiá»ƒm tra real-time listener
5. **Composite index**: Táº¡o indexes cho Firestore queries

### Debug Pages
- `/debug` - Firestore data debug
- `/permission-test` - Test permissions system

### LiÃªn há»‡ há»— trá»£
- Táº¡o issue trÃªn GitHub
- Kiá»ƒm tra documentation trong project
- ğŸ“§ Email: admin@lunarapp.com
- ğŸ“± Hotline: 0123-456-789

## ğŸŒ Production Deployment

### Current Deployment
- **Platform**: Vercel
- **Domain**: [thiendianhan.app](https://thiendianhan.app)
- **Auto-deploy**: Connected to GitHub main branch

### Vercel Configuration
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "build",
  "framework": "create-react-app",
  "routes": [
    {
      "src": "/[^.]+",
      "dest": "/",
      "status": 200
    }
  ]
}
```

### Environment Variables (Production)
```env
REACT_APP_FIREBASE_API_KEY=production_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=thiendianhan.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=thiendianhan
REACT_APP_FIREBASE_STORAGE_BUCKET=thiendianhan.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=sender_id
REACT_APP_FIREBASE_APP_ID=app_id
REACT_APP_FIREBASE_MEASUREMENT_ID=measurement_id
```

## ğŸ”® Future Roadmap

### Planned Features
- [ ] Real-time chat system
- [ ] Mobile app (React Native)
- [ ] AI-powered fortune telling
- [ ] Social features & sharing
- [ ] Premium content subscription
- [ ] Multi-language support

### Performance Improvements
- [ ] PWA implementation
- [ ] Image optimization
- [ ] Full-text search
- [ ] Push notifications
- [ ] Offline support

## ğŸ“Š Analytics & Monitoring

### Built-in Analytics
- Page visit tracking
- User registration analytics
- Membership conversion rates
- Stars usage patterns

### Firebase Analytics
- User engagement metrics
- Performance monitoring
- Crash reporting
- Custom events tracking

## ğŸ¤ Contributing

1. Fork the project
2. Create feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Open Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ™ Acknowledgments

- Lunar calendar algorithms
- Vietnamese astronomical data
- Firebase team for excellent platform
- React community for awesome ecosystem
